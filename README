ROK4/BE4
========
Version ROK4 : 0.14.0
Version BE4  : 0.0.0

Configuration Serveur Web
+++++++++++++++++++++++++

utilisation de ROK4 en mode FastCGI

NGinX
------

//TODO

Support du SSL pour FastCGI: 
ajout dans la configuration du site SSL
   fastcgi_param HTTPS on;

Apache2
-------

1) Download mod_fastcgi (http://www.fastcgi.com/drupal/node/3)

2) Enable mod_fastcgi in Apache

	LoadModule fastcgi_module /path_to_mod_fastcgi.so
	<IfModule mod_fastcgi.c>
 		 AddHandler fastcgi-script .fcgi
  		FastCgiIpcDir /var/lib/apache2/fastcgi
	</IfModule>


3) Add the following instruction to your virtualhost configuration :

       <Directory "/path_to_folder_containing_rok4_executable">
                AllowOverride None
                Options None
                SetHandler  fastcgi-script
                Order allow,deny
                Allow from all
        </Directory>
	
	FastCgiServer /path_to_rok4_executable -init-start-delay 5 -port 1998 -processes 2


Compilation
+++++++++++

La compilation des sources de ROK4 necessite une version de CMake supérieure à 2.8.5.

Dans le dossier contenant les sources du projet rok4 lancer les lignes de commandes suivantes

 mkdir build 
 cd build 
 cmake .. [-DOPTION1 -DOPTION2]
 make 
 make [install|package]

Exemple:
--------

 cmake -DCMAKE_INSTALL_PREFIX=$HOME/rok4/target -DDEP_PATH=/tmp ..

Options
-------

les options sont définies en utilisant le préfixe -D : 

 exemple : cmake .. -DUNITTEST=TRUE -DBUILD_BE4=FALSE


Liste des options disponibles pour le build du projet

CMAKE_INSTALL_PREFIX : 
  chemins d'installation du projet (PATH) 
  par défaut : /usr/local

DEP_PATH : 
  chemins des dépendances ROK4 déjà compilé et installé (PATH)
  par défaut : ./target
  
BUILD_DEPENDENCIES : 
  compilation des dépendances de ROK4 manquante (BOOL)
  les dépendances seront installées avec rok4
  par défaut : TRUE  

BUILD_ROK4 : 
  compilation du sous-système ROK4Server (BOOL)
  par défaut : TRUE  
  
BUILD_BE4 : 
  compilation du sous-système BE4 (BOOL)
  par défaut : TRUE  

BUILD_DOC : 
  compilation des documentations avec doxygen (BOOL)
  Création de la cible "doc" à compiler avant l'utilisation de make install et/ou make package
    make doc 
  par défaut : TRUE  

UNITTEST : compilation des tests unitaires (BOOL)
  Création de la cible "test" 
    make test 
  par défaut : FALSE 

DEBUG_BUILD : compilation en mode debug (BOOL)
 par défaut : FALSE

RPM_PACKAGE : (EXPERIMENTAL)
  Création d'un paquet RPM à la place d'un tar.gz 
  make all doc package
  par défaut : FALSE 

DEB_PACKAGE : (EXPERIMENTAL)
  Création d'un paquet pour debian à la place d'un tar.gz 
  dépend des bibliothèques systèmes
  make all doc package
  par défaut : FALSE 

USE_SYSTEM_LIB : (EXPERIMENTAL)
  force la compilation à utiliser les bibliothèques du système
  par défaut : FALSE 
