<?xml version="1.0" encoding="UTF-8" ?>
 <log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/"> 
 	<!-- On decrit ici ce qu'on veut voir sur la sortie standard. On retrouvera ces informations
             dans les logs du serveur HTTP (en tout cas pour apache). Cette sortie n'est peut-etre pas
             necessaire, mais elle permet d'avoir des infos meme si on ne peut ecrire dans le fichier 
             de log normal de rok4. 
             Pour bien indiquer la provenance des lignes, je les prefixe par ROK4.
 	-->
 	<appender name="MyConsoleAppender" class="org.apache.log4j.ConsoleAppender"> 
 		<param name="Target" value="System.out"/> 
 		<layout class="org.apache.log4j.PatternLayout"> 
 			<!-- <param name="ConversionPattern" value="ROK4: %-5p - %m%n"/> -->  
                        <!-- exemple:
                             ROK4: INFO  - <message> 
                         -->
             
             <param name="ConversionPattern" value="ROK4: %d{yyyy-MM-dd HH:mm:ss,SSS} thread:%t [%p] (%F:%L) %m%n"/>
                        <!-- exemple:
                             2010-06-02 10:18:07,393 null [DEBUG] (WMSServer.cpp:84) /mnt/geoportail/ppons/ortho-jpeg/262144
                          -->
 		</layout> 
 	</appender> 
 
 
 	<!-- the following appender with the name "TimeBasedLog.log", every night a few seconds after
 	     12::00PM the old log will be renamed with append the date in filename, and a new log file
 	     with the name "TimeBasedLog.log" will be create. 
 	     notice the RollingFileAppender is under "org.apache.log4j.rolling" namespace
 	-->
 	<appender name="MyRollingAppenderDaily" class="org.apache.log4j.rolling.RollingFileAppender">
 		<rollingPolicy class="org.apache.log4j.rolling.TimeBasedRollingPolicy">
 			<param name="FileNamePattern" value="/var/tmp/rok4.%d{yyyy-MM-dd}.log"/>
 			<param name="activeFileName" value="/var/tmp/rok4cxx.log"/>
 		</rollingPolicy>
 
 		<layout class="org.apache.log4j.PatternLayout">
 			<param name="ConversionPattern" value="%d{yyyy-MM-dd HH:mm:ss,SSS} thread:%t [%p] (%F:%L) %m%n"/>
                        <!-- exemple:
                             2010-06-02 10:18:07,393 null [DEBUG] (WMSServer.cpp:84) /mnt/geoportail/ppons/ortho-jpeg/262144
                          -->
 		</layout> 
 		<param name="file" value="/var/tmp/rok4cxx.log"/>
 		<param name="append" value="true"/>
 	</appender>

 	<root>
		<level value="debug" />
 		<priority value="all" />
 		<appender-ref ref="MyRollingAppenderDaily"/>
 		<appender-ref ref="MyConsoleAppender"/>
 	</root> 
 
 </log4j:configuration>
